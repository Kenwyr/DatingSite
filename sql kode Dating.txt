use master;
if exists(select * from sys.databases where name = 'Dating')
begin
   drop database Dating
   print 'Vi dropper databasen Dating - findes i forvejen'
end
else 
begin
   print 'DB Gorm findes ikke, vil blive oprettet'
end
go
create database Dating
go
create table PostNR(
PostNR integer primary key,
Bynavn nvarchar(40)
)
create table Bruger(
BrugerID integer primary key,
Fornavn nvarchar(25),
Efternavn nvarchar(30),
Fødselsdato datetime,
Oprettelsesdato datetime,
Køn bit,
SextOrientering integer,
Højde int,
Vægt decimal(3,1),
Brugernavn nvarchar(40),
Passw0rd nvarchar(40),
Email nvarchar(60),
PostNr int foreign key references PostNR(PostNR)
)
go

create table Profil (
ProfilID integer primary key foreign key references Bruger(BrugerID),
Profiltekst nvarchar(1000),
Profilbillede varbinary(max),
)
go

create table DirectMessage(
DmID integer primary key,
Emne nvarchar(1000),
Besked nvarchar(1000),
AfsendtTid datetime,
AfsenderID integer foreign key references Bruger(BrugerID),
ModtagerID integer foreign key references Bruger(BrugerID),
LæstStatus bit
)
go

create table Likes(
LikerID integer foreign key references Bruger(BrugerID),
LikedID integer foreign key references Bruger(BrugerID)
)
go

alter table Likes
Add constraint like_liked unique(LikerID, LikedID)